<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HiChat Overlay Settings</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <!-- Icon Font (optional, using emojis for now or unicode) -->
</head>

<body>
    <h1>üé® HiChat Overlay</h1>

    <div class="tabs">
        <button class="tab-btn active" data-tab="sources">Sources</button>
        <button class="tab-btn" data-tab="settings">Global Settings</button>
    </div>

    <!-- Tab: Sources Manager -->
    <div id="sources" class="tab-content active">
        <div class="manager-layout">
            <!-- Left: Source List -->
            <div class="source-list-panel">
                <div class="panel-header">
                    <h2>Sources</h2>
                    <button id="add-source-btn" class="btn-sm" title="Add Source">‚ûï Add</button>
                </div>
                <div class="source-list-container">
                    <ul id="source-list">
                        <!-- List items injected by JS -->
                        <!-- Example:
                        <li class="source-item active">
                            <span class="drag-handle">::</span>
                            <span class="source-name">Chat</span>
                            <div class="source-actions">
                                <button class="icon-btn">üëÅÔ∏è</button>
                                <button class="icon-btn">üóëÔ∏è</button>
                            </div>
                        </li>
                        -->
                    </ul>
                </div>
                <div class="list-controls">
                    <button id="move-up-btn" class="btn-secondary" title="Move Up">‚¨ÜÔ∏è</button>
                    <button id="move-down-btn" class="btn-secondary" title="Move Down">‚¨áÔ∏è</button>
                </div>
            </div>

            <!-- Right: Properties -->
            <div class="properties-panel" id="properties-panel">
                <div class="panel-header">
                    <h2>Properties</h2>
                </div>

                <div id="no-selection-msg">Select a source to edit</div>

                <div id="properties-form" style="display: none;">
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="prop-name">
                    </div>

                    <div class="form-group">
                        <label for="prop-zoom">Zoom: <span id="prop-zoom-val">1.0</span></label>
                        <input type="range" id="prop-zoom" min="0.1" max="5.0" step="0.1" value="1.0">
                    </div>

                    <div class="form-group">
                        <label>URL</label>
                        <input type="text" id="prop-url" placeholder="https://...">
                    </div>

                    <div class="grid-2">
                        <div class="form-group">
                            <label>Width</label>
                            <input type="number" id="prop-width">
                        </div>
                        <div class="form-group">
                            <label>Height</label>
                            <input type="number" id="prop-height">
                        </div>
                        <div class="form-group">
                            <label>X</label>
                            <input type="number" id="prop-x">
                        </div>
                        <div class="form-group">
                            <label>Y</label>
                            <input type="number" id="prop-y">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Audio</label>
                        <div class="audio-controls">
                            <label class="checkbox-inline">
                                <input type="checkbox" id="prop-muted"> Mute
                            </label>
                            <input type="range" id="prop-volume" min="0" max="100" value="100">
                            <span id="prop-volume-val">100%</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Opacity: <span id="prop-opacity-val">100%</span></label>
                        <input type="range" id="prop-opacity" min="0" max="100" value="100">
                    </div>

                    <div class="form-group">
                        <label class="toggle-wrapper">
                            <input type="checkbox" id="prop-interact">
                            <div class="toggle-switch"></div>
                            <span>Interactive (Clickable)</span>
                        </label>
                    </div>

                    <div class="form-group">
                        <label>Custom CSS</label>
                        <div class="preset-buttons">
                            <button type="button" class="btn-secondary" id="preset-yt">YouTube</button>
                            <button type="button" class="btn-secondary" id="preset-twitch">Twitch</button>
                            <button type="button" class="btn-secondary" id="preset-sl">Streamlabs</button>
                        </div>
                        <textarea id="prop-css" placeholder="/* Custom CSS */"></textarea>
                    </div>

                    <div class="form-group" style="margin-top: 2rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
                        <button id="delete-source-btn" class="btn-primary" style="background-color: var(--error);">
                            üóëÔ∏è Delete Source
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tab: Global Settings -->
    <div id="settings" class="tab-content">
        <div class="card">
            <div class="form-group">
                <label for="menu-shortcut">Menu Shortcut</label>
                <input type="text" id="menu-shortcut" value="Shift+F1" placeholder="Shift+F1">
                <small>Key combination to open the management menu (Edit Mode).</small>
            </div>

            <div class="form-group">
                <label for="toggle-shortcut">Toggle Sources Shortcut</label>
                <input type="text" id="toggle-shortcut" value="Shift+F2" placeholder="Shift+F2">
                <small>Key combination to toggle visibility of all sources.</small>
            </div>

            <div class="form-group">
                <label class="toggle-wrapper">
                    <input type="checkbox" id="hide-from-obs">
                    <div class="toggle-switch"></div>
                    <span>Hide from OBS / Capture</span>
                </label>
                <small>Prevents the window from being captured by streaming software.</small>
            </div>

            <div class="form-group">
                <label for="language-select">Language</label>
                <div class="custom-select-wrapper">
                    <div class="custom-select" id="language-custom-select">
                        <div class="custom-select__trigger">
                            <span class="trigger-content">
                                <img src="https://flagcdn.com/w40/gb.png" class="flag-icon" id="current-flag">
                                <span id="current-lang-text">English</span>
                            </span>
                            <div class="arrow"></div>
                        </div>
                        <div class="custom-select-options">
                            <div class="custom-option" data-value="en" data-flag="https://flagcdn.com/w40/gb.png">
                                <img src="https://flagcdn.com/w40/gb.png" class="flag-icon"> English
                            </div>
                            <div class="custom-option" data-value="th" data-flag="https://flagcdn.com/w40/th.png">
                                <img src="https://flagcdn.com/w40/th.png" class="flag-icon"> ‡πÑ‡∏ó‡∏¢ (Thai)
                            </div>
                            <div class="custom-option" data-value="zh" data-flag="https://flagcdn.com/w40/cn.png">
                                <img src="https://flagcdn.com/w40/cn.png" class="flag-icon"> ‰∏≠Êñá (Chinese)
                            </div>
                            <div class="custom-option" data-value="ja" data-flag="https://flagcdn.com/w40/jp.png">
                                <img src="https://flagcdn.com/w40/jp.png" class="flag-icon"> Êó•Êú¨Ë™û (Japanese)
                            </div>
                            <div class="custom-option" data-value="de" data-flag="https://flagcdn.com/w40/de.png">
                                <img src="https://flagcdn.com/w40/de.png" class="flag-icon"> Deutsch (German)
                            </div>
                            <div class="custom-option" data-value="it" data-flag="https://flagcdn.com/w40/it.png">
                                <img src="https://flagcdn.com/w40/it.png" class="flag-icon"> Italiano (Italian)
                            </div>
                            <div class="custom-option" data-value="es" data-flag="https://flagcdn.com/w40/es.png">
                                <img src="https://flagcdn.com/w40/es.png" class="flag-icon"> Espa√±ol (Spanish)
                            </div>
                            <div class="custom-option" data-value="id" data-flag="https://flagcdn.com/w40/id.png">
                                <img src="https://flagcdn.com/w40/id.png" class="flag-icon"> Bahasa Indonesia
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group update-section" style="border-top: 1px solid var(--border-color); padding-top: 1.5rem; margin-top: 1.5rem;">
                <label id="update-title">Updates</label>
                <div class="update-controls">
                    <button id="check-update-btn" class="btn-secondary">Check for Updates</button>
                    <span id="update-status-text" class="status-text"></span>
                </div>
                <div id="update-progress" class="progress-bar-container" style="display: none;">
                    <div class="progress-bar" id="download-progress-bar"></div>
                </div>
                <button id="restart-update-btn" class="btn-primary" style="display: none; margin-top: 1rem;">Restart & Install</button>
            </div>

            <div class="tips-box">
                <h3>üí° Tips</h3>
                <ul>
                    <li>Use <strong>Shift+F1</strong> (or your shortcut) to toggle <strong>Edit Mode</strong> on the
                        overlay.</li>
                    <li>In Edit Mode, you can drag and resize sources directly.</li>
                    <li>Sources at the bottom of the list are rendered on top (Z-Index).</li>
                </ul>
            </div>
        </div>
    </div>

    <footer>
        <button id="launch" class="btn-primary">
            üöÄ Launch / Update Overlay
        </button>
        <button id="close-app" class="btn-danger">
            ‚ùå Close Program
        </button>
        <div id="status" aria-live="polite"></div>
    </footer>

    <script src="translations.js"></script>
    <script src="renderer.js"></script>
</body>

</html>